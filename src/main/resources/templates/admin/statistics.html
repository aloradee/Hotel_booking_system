<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - Hotel Booking</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-3 col-lg-2 sidebar bg-dark text-white" style="min-height: 100vh;">
            <h3 class="text-center py-3">Hotel Booking Admin</h3>
            <nav>
                <a th:href="@{/admin/dashboard}" class="text-white d-block p-2">üìä –î–∞—à–±–æ—Ä–¥</a>
                <a th:href="@{/admin/hotels}" class="text-white d-block p-2">üè® –û—Ç–µ–ª–∏</a>
                <a th:href="@{/admin/rooms}" class="text-white d-block p-2">üõèÔ∏è –ö–æ–º–Ω–∞—Ç—ã</a>
                <a th:href="@{/admin/users}" class="text-white d-block p-2">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
                <a th:href="@{/admin/bookings}" class="text-white d-block p-2">üìÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</a>
                <a th:href="@{/admin/statistics}" class="text-white d-block p-2 bg-primary">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
                <a th:href="@{/logout}" class="text-white d-block p-2 mt-4">üö™ –í—ã–π—Ç–∏</a>
            </nav>
        </div>

        <div class="col-md-9 col-lg-10 p-4">
            <h1>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h1>

            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">–≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</h5>
                </div>
                <div class="card-body">
                    <p>–°–∫–∞—á–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV</p>
                    <a th:href="@{/admin/export-csv}" class="btn btn-success">
                        üì• –°–∫–∞—á–∞—Ç—å CSV —Ñ–∞–π–ª
                    </a>
                    <button class="btn btn-info" onclick="showCSVPreview()">
                        üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö
                    </button>
                </div>
            </div>

            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <th>ID</th>
                                <th>–¢–∏–ø —Å–æ–±—ã—Ç–∏—è</th>
                                <th>ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                                <th>–í—Ä–µ–º—è</th>
                                <th>–î–∞–Ω–Ω—ã–µ</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="stat : ${statistics}">
                                <td th:text="${stat.id}"></td>
                                <td>
                                            <span th:if="${stat.eventType == 'USER_REGISTRATION'}"
                                                  class="badge bg-success">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</span>
                                    <span th:if="${stat.eventType == 'BOOKING_CREATED'}"
                                          class="badge bg-primary">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
                                </td>
                                <td th:text="${stat.userId}"></td>
                                <td th:text="${#temporals.format(stat.timestamp, 'dd.MM.yyyy HH:mm')}"></td>
                                <td>
                                    <button class="btn btn-sm btn-outline-info"
                                            th:onclick="|showDetails('${stat.id}')|">
                                        –ü–æ–∫–∞–∑–∞—Ç—å
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function showCSVPreview() {
        alert('CSV —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç: ID,EventType,UserId,Timestamp,Data');
    }

    function showDetails(id) {
        alert('–î–µ—Ç–∞–ª–∏ –∑–∞–ø–∏—Å–∏ ' + id);
    }
</script>
</body>
</html>
